<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Career Chatbot</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body { background: #001f3f; color: white; font-family: 'Poppins'; margin: 0; overflow: hidden; }
    .chatbox {
      position: fixed; bottom: 20px; right: 20px;
      width: 350px; height: 450px; background: rgba(0,0,0,0.8);
      border-radius: 10px; display: none; flex-direction: column;
    }
    .chat-header {
      background: #00ccff; color: #001f3f; padding: 10px;
      border-radius: 10px 10px 0 0; text-align: center; font-weight: bold;
    }
    .chat-body {
      flex: 1; overflow-y: auto; padding: 10px;
      display: flex; flex-direction: column; gap: 10px;
    }
    .chat-msg { padding: 8px 12px; border-radius: 12px; max-width: 80%; }
    .user { background: #0074d9; align-self: flex-end; }
    .bot { background: #004c99; align-self: flex-start; }
    .chat-input {
      display: flex; padding: 10px; border-top: 1px solid #003f70;
    }
    input { flex: 1; padding: 8px; border: none; border-radius: 6px; }
    button { margin-left: 5px; background: #00ccff; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; }
    #chatIcon {
      position: fixed; bottom: 20px; right: 20px;
      background: #00ccff; color: #001f3f;
      padding: 15px; border-radius: 50%;
      cursor: pointer; font-size: 20px; font-weight: bold;
    }
  </style>
</head>
<body>
  <div id="chatIcon">ðŸ’¬</div>

  <div class="chatbox" id="chatbox">
    <div class="chat-header">Career Advisor ðŸ¤–</div>
    <div class="chat-body" id="chatBody"></div>
    <div class="chat-input">
      <input type="text" id="userInput" placeholder="Ask about your career...">
      <button onclick="sendMessage()">Send</button>
    </div>
  </div>

  <script>
    const chatIcon = document.getElementById('chatIcon');
    const chatbox = document.getElementById('chatbox');
    const chatBody = document.getElementById('chatBody');

    chatIcon.onclick = () => {
      chatbox.style.display = chatbox.style.display === 'flex' ? 'none' : 'flex';
    };

    async function sendMessage() {
      const input = document.getElementById('userInput');
      const message = input.value.trim();
      if (!message) return;
      appendMessage('user', message);
      input.value = '';

      const res = await fetch('/get_response', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ message })
      });
      const data = await res.json();
      appendMessage('bot', data.reply);
    }

    function appendMessage(sender, text) {
      const msg = document.createElement('div');
      msg.className = `chat-msg ${sender}`;
      msg.innerText = text;
      chatBody.appendChild(msg);
      chatBody.scrollTop = chatBody.scrollHeight;
    }
  </script>
</body>
</html>
